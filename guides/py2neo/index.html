
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content=" A knowledge management system for the metrics service line">
      
      
      
        <meta name="author" content="Erik Anderson">
      
      
      <link rel="shortcut icon" href="../../img/ei-logo-black.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.5">
    
    
      
        <title>py2neo - EI Metrics</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.77f3fd56.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="#4051b5">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-151885346-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="indigo">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#py2neo" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="EI Metrics" class="md-header__button md-logo" aria-label="EI Metrics">
      
  <img src="../../img/ei-logo-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EI Metrics
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              py2neo
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="EI Metrics" class="md-nav__button md-logo" aria-label="EI Metrics">
      
  <img src="../../img/ei-logo-white.png" alt="logo">

    </a>
    EI Metrics
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Project Portfolio
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Project Portfolio" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Project Portfolio
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../portfolio/project-portfolio/" class="md-nav__link">
        Portfolio
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      <label class="md-nav__link" for="__nav_2_2">
        Case Studies
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Case Studies" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Case Studies
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../portfolio/ggs-hqt/ggs-hqt/" class="md-nav__link">
        Giant Garter Snake Habitat Quantification Tool
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../metrics-services/how-we-work/" class="md-nav__link">
        Metrics Services
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Metrics Design Philosophy
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Metrics Design Philosophy" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Metrics Design Philosophy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics-design/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics-design/step1-start-at-the-end/" class="md-nav__link">
        Step 1: Start at the End
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics-design/step2-map-it/" class="md-nav__link">
        Step 2: Map It
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics-design/step3-develop-empathy/" class="md-nav__link">
        Step 3: Develop Empathy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics-design/step4-define-the-problem/" class="md-nav__link">
        Step 4: Define the Problem
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics-design/step5-identify-a-solution/" class="md-nav__link">
        Step 5: Identify a Solution
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics-design/step6-implement/" class="md-nav__link">
        Step 6: Implement
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics-design/step7-adapt/" class="md-nav__link">
        Step 7: Iterate & Adapt
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        The Basics
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="The Basics" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          The Basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../the-basics/getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Git
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Git" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Git
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../git/install-configure-git/" class="md-nav__link">
        Install Git
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../git/initializing-git/" class="md-nav__link">
        Create Project
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../git/common-workflow/" class="md-nav__link">
        Common Workflow
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../git/collaborating-with-git/" class="md-nav__link">
        Collaborating with Git
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../git/additional-reference/" class="md-nav__link">
        Additional Reference
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        Development
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Development" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../development/command-line-tools/" class="md-nav__link">
        Command Line Tools
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../development/scheduling-tasks/" class="md-nav__link">
        Scheduling Tasks
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../development/secrets/" class="md-nav__link">
        Secrets
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../development/environment-variables/" class="md-nav__link">
        Environment Variables
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../development/virtual-environments/" class="md-nav__link">
        Virtual Environments
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        Deployment
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Deployment" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Deployment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/deployment-overview/" class="md-nav__link">
        Deployment Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/heroku/" class="md-nav__link">
        Heroku
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/google-api/" class="md-nav__link">
        Google API
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/gs-app/" class="md-nav__link">
        Google Sheets App
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/lightweight-backends/" class="md-nav__link">
        Lightweight Backends
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      <label class="md-nav__link" for="__nav_9">
        Data Management
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Data Management" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Data Management
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data-management/database-overview/" class="md-nav__link">
        Database Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data-management/postgres-tutorial/" class="md-nav__link">
        PostgreSQL Tutorial
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data-management/neo4j-overview/" class="md-nav__link">
        Neo4j Graph Databases
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data-management/neo4j-tutorial/" class="md-nav__link">
        Neo4j Tutorial
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data-management/neo4j-advanced/" class="md-nav__link">
        Neo4j Advanced
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      <label class="md-nav__link" for="__nav_10">
        Data Analysis
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Data Analysis" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Data Analysis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data-science/machine-learning-tutorial/machine-learning-tutorial/" class="md-nav__link">
        Machine Learning Tutorial
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      <label class="md-nav__link" for="__nav_11">
        Data Visualization
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Data Visualization" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Data Visualization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data-visualization/data-visualization/" class="md-nav__link">
        Data Visualization
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../data-visualization/dashboards/" class="md-nav__link">
        Dashboards
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" checked>
      
      <label class="md-nav__link" for="__nav_12">
        Python Packages
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Python Packages" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Python Packages
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../dash/" class="md-nav__link">
        Dash
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          py2neo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        py2neo
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-missing-quick-start-guide" class="md-nav__link">
    The missing quick start guide
  </a>
  
    <nav class="md-nav" aria-label="The missing quick start guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#0-installation" class="md-nav__link">
    0. Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-create-a-graph-database" class="md-nav__link">
    1. Create a graph database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-connect-with-py2neo" class="md-nav__link">
    2. Connect with py2neo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-create-nodes-and-relationships" class="md-nav__link">
    3. Create nodes and relationships
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-query-graph" class="md-nav__link">
    4. Query graph
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-nodes" class="md-nav__link">
    Add nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-relationships" class="md-nav__link">
    Add relationships
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#match-nodes" class="md-nav__link">
    Match Nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-properties-one-property" class="md-nav__link">
    Update properties (one property)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-properties-multiple-properties" class="md-nav__link">
    Update properties (multiple properties)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-nodes-from-list" class="md-nav__link">
    Delete nodes from list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-graph" class="md-nav__link">
    Query Graph
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#working-with-pandas" class="md-nav__link">
    Working with pandas
  </a>
  
    <nav class="md-nav" aria-label="Working with pandas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#export-to-dataframe" class="md-nav__link">
    Export to DataFrame
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import-nodes-from-dataframe-columns" class="md-nav__link">
    Import nodes from DataFrame columns
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import-nodes-from-dataframe-rows" class="md-nav__link">
    Import nodes from DataFrame rows
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-relationships-from-dataframe-columns" class="md-nav__link">
    Add relationships from DataFrame columns
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-objects" class="md-nav__link">
    Using objects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" >
      
      <label class="md-nav__link" for="__nav_13">
        Additional Resources
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Additional Resources" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          Additional Resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../additional-resources/scoping/" class="md-nav__link">
        Scoping Canvas
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../additional-resources/product-definition/" class="md-nav__link">
        Product Definition
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../additional-resources/specification-doc/" class="md-nav__link">
        Product Specification
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../additional-resources/persona-guide/" class="md-nav__link">
        Persona Development Guide
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../additional-resources/interview-guide/" class="md-nav__link">
        Interview Guide
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../additional-resources/user-testing-guide/" class="md-nav__link">
        User Testing Guide
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14" type="checkbox" id="__nav_14" >
      
      <label class="md-nav__link" for="__nav_14">
        How to Maintain This Site
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="How to Maintain This Site" data-md-level="1">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          How to Maintain This Site
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../maintenance/development-guidance/" class="md-nav__link">
        Development Guide
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../maintenance/tips-and-tricks/" class="md-nav__link">
        Tips & Tricks
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-missing-quick-start-guide" class="md-nav__link">
    The missing quick start guide
  </a>
  
    <nav class="md-nav" aria-label="The missing quick start guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#0-installation" class="md-nav__link">
    0. Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-create-a-graph-database" class="md-nav__link">
    1. Create a graph database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-connect-with-py2neo" class="md-nav__link">
    2. Connect with py2neo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-create-nodes-and-relationships" class="md-nav__link">
    3. Create nodes and relationships
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-query-graph" class="md-nav__link">
    4. Query graph
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-nodes" class="md-nav__link">
    Add nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-relationships" class="md-nav__link">
    Add relationships
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#match-nodes" class="md-nav__link">
    Match Nodes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-properties-one-property" class="md-nav__link">
    Update properties (one property)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-properties-multiple-properties" class="md-nav__link">
    Update properties (multiple properties)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-nodes-from-list" class="md-nav__link">
    Delete nodes from list
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-graph" class="md-nav__link">
    Query Graph
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#working-with-pandas" class="md-nav__link">
    Working with pandas
  </a>
  
    <nav class="md-nav" aria-label="Working with pandas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#export-to-dataframe" class="md-nav__link">
    Export to DataFrame
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import-nodes-from-dataframe-columns" class="md-nav__link">
    Import nodes from DataFrame columns
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import-nodes-from-dataframe-rows" class="md-nav__link">
    Import nodes from DataFrame rows
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-relationships-from-dataframe-columns" class="md-nav__link">
    Add relationships from DataFrame columns
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-objects" class="md-nav__link">
    Using objects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="py2neo">Py2neo<a class="headerlink" href="#py2neo" title="Permanent link">&para;</a></h1>
<p>Py2neo is a python package for working with graph databases on Neo4j. It's not officially supported by Neo4j (as the package <code>neo4j</code> is), but it offers a worthwhile suite of tools for working with graph databases in a more pythonic way. </p>
<p>Before you get too invested, a word of warning. The package is not as well used as something like <code>pandas</code>, and it has very little in the way of usage documentation--just a straightforward documentation of its API. You will struggle to find current documentation  for problems your facing (besides this wonderful guide, of course). When you do find a solution, it will almost certainly be out of date and no longer work. There's almost nothing on YouTube posted in the last 5 years. You will probably end up digging through its source code at some point trying to figure something out. If you're still here, read on!</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Always start at the home page of the py2neo handbook (<a href="https://py2neo.org/">py2neo.org</a>) when looking for documentation. If you search google for the specific function or issue you are having, the documentation will be out of date.</p>
</div>
<h2 id="the-missing-quick-start-guide">The missing quick start guide<a class="headerlink" href="#the-missing-quick-start-guide" title="Permanent link">&para;</a></h2>
<p>To get up-to-speed, we'll work through a quick canonical example.</p>
<h3 id="0-installation">0. Installation<a class="headerlink" href="#0-installation" title="Permanent link">&para;</a></h3>
<p>To install the latest release of py2neo, simply use:</p>
<div class="codehilite"><pre><span></span><code>pip install --upgrade py2neo
</code></pre></div>

<h3 id="1-create-a-graph-database">1. Create a graph database<a class="headerlink" href="#1-create-a-graph-database" title="Permanent link">&para;</a></h3>
<p>First, you'll need to create an empty graph database using Neo4j Desktop. Check out the <a href="../../data-management/neo4j-tutorial/">Neo4j tutorial</a> for the first steps. Start the database. The database should be exposed on port 7687. If not, you will have to update the URI in the next step. Make sure you remember the password.</p>
<h3 id="2-connect-with-py2neo">2. Connect with py2neo<a class="headerlink" href="#2-connect-with-py2neo" title="Permanent link">&para;</a></h3>
<p>Once the graph database has been started, it will be available to connect.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">py2neo</span> <span class="kn">import</span> <span class="n">Graph</span>

<span class="n">URI</span> <span class="o">=</span> <span class="s1">&#39;bolt://localhost:7687&#39;</span>
<span class="n">USERNAME</span> <span class="o">=</span> <span class="s1">&#39;neo4j&#39;</span>
<span class="n">PASSWORD</span> <span class="o">=</span> <span class="s1">&#39;&lt;password&gt;&#39;</span>

<span class="n">graph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">(</span><span class="n">URI</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="n">USERNAME</span><span class="p">,</span> <span class="n">PASSWORD</span><span class="p">))</span>
</code></pre></div>

<p>The first argument to graph is the URI string for the graph. The <code>auth</code> parameter is a tuple of the username (generally 'neo4j') and your password.</p>
<h3 id="3-create-nodes-and-relationships">3. Create nodes and relationships<a class="headerlink" href="#3-create-nodes-and-relationships" title="Permanent link">&para;</a></h3>
<p>It is quite easy to create nodes and relationships. </p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">py2neo</span> <span class="kn">import</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Relationship</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s2">&quot;Person&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Alice&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">33</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s2">&quot;Person&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">44</span><span class="p">)</span>
<span class="n">KNOWS</span> <span class="o">=</span> <span class="n">Relationship</span><span class="o">.</span><span class="n">type</span><span class="p">(</span><span class="s2">&quot;KNOWS&quot;</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">KNOWS</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">),</span> <span class="s2">&quot;Person&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">)</span>
</code></pre></div>

<p>The nodes assigned to <code>a</code> and <code>b</code> and the relationship <code>KNOWS</code> are not actually created until the <code>merge</code> command is called.</p>
<p>Let's look at an alternative pattern that uses a transaction to create the nodes and relationships. This is going to be safer in most cases, as a transaction will be rolled back if any part fails.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">py2neo</span> <span class="kn">import</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Relationship</span>

<span class="n">tx</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s2">&quot;Person&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Alice&quot;</span><span class="p">)</span>
<span class="n">tx</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s2">&quot;Person&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Bob&quot;</span><span class="p">)</span>
<span class="n">ab</span> <span class="o">=</span> <span class="n">Relationship</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s2">&quot;KNOWS&quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="n">tx</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">ab</span><span class="p">)</span>

<span class="n">tx</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</code></pre></div>

<p>Note some commands are transactions, and you shouldn't use both at the same time (e.g., update properties of node with graph.push()). If you have up to 20,000 operations to run you can batch those with one transaction. This is both safe and efficient. Over 20,000 you may run into a memory issue and you'll need to periodically commit as you are running (committing each of significantly more than 20,000 transaction might take a long time).</p>
<p>See more on <a href="#add-nodes">adding nodes</a>.</p>
<h3 id="4-query-graph">4. Query graph<a class="headerlink" href="#4-query-graph" title="Permanent link">&para;</a></h3>
<p>You can run any cypher query with the <code>graph.run()</code> command:</p>
<div class="codehilite"><pre><span></span><code><span class="n">results</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;MATCH(p:Person {name=&#39;Alice&#39;})-[k:KNOWS]-(p2) RETURN p2.name&quot;</span><span class="p">)</span>
</code></pre></div>

<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<h3 id="add-nodes">Add nodes<a class="headerlink" href="#add-nodes" title="Permanent link">&para;</a></h3>
<p>A node has:</p>
<ul>
<li>a label (e.g., 'Person'), </li>
<li>a suite of properties (e.g., name='Alice'), </li>
<li>a primary key (the property with which to identify the node, e.g., 'name'), and </li>
<li>a primary label (e.g., 'Person')</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="n">tx</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
<span class="n">new_node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s1">&#39;&lt;LABEL&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">id_property</span><span class="o">&gt;=&lt;&gt;</span><span class="p">,</span>
                <span class="n">primary_key</span><span class="o">=</span><span class="s1">&#39;&lt;id_property&gt;&#39;</span><span class="p">,</span>
                <span class="n">primary_label</span><span class="o">=</span><span class="s1">&#39;&lt;LABEL&gt;&#39;</span><span class="p">)</span>
<span class="n">tx</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_node</span><span class="p">,</span> <span class="s1">&#39;&lt;LABEL&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;id_property&gt;&#39;</span><span class="p">)</span>
<span class="n">tx</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</code></pre></div>

<p>You can also use a dictionary to add properties. Any kwargs are read as properties, any args are read as labels. This can be helpful when reading from a pandas dataframe (see Import from DataFrame rows below).</p>
<div class="codehilite"><pre><span></span><code><span class="n">property_dict</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;&lt;property1&gt;&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;prop_val1&gt;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;&lt;property2&gt;&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;prop_val2&gt;&#39;</span>
<span class="p">}</span>

<span class="n">new_node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s1">&#39;&lt;LABEL&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">id_property</span><span class="o">&gt;=&lt;&gt;</span><span class="p">,</span>
                <span class="n">primary_key</span><span class="o">=</span><span class="s1">&#39;&lt;id_property&gt;&#39;</span><span class="p">,</span>
                <span class="n">primary_label</span><span class="o">=</span><span class="s1">&#39;&lt;LABEL&gt;&#39;</span><span class="p">,</span>
               <span class="o">**</span><span class="n">property_dict</span><span class="p">)</span>
</code></pre></div>

<h3 id="add-relationships">Add relationships<a class="headerlink" href="#add-relationships" title="Permanent link">&para;</a></h3>
<p>If </p>
<h3 id="match-nodes">Match Nodes<a class="headerlink" href="#match-nodes" title="Permanent link">&para;</a></h3>
<p>To match nodes, first set up a matcher object:</p>
<div class="codehilite"><pre><span></span><code><span class="n">matcher</span> <span class="o">=</span> <span class="n">NodeMatcher</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</code></pre></div>

<h3 id="update-properties-one-property">Update properties (one property)<a class="headerlink" href="#update-properties-one-property" title="Permanent link">&para;</a></h3>
<p>This runs as a transaction, so don't wrap in transaction. Note that updates to properties occur only locally until pushed using <code>graph.push</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="n">node</span> <span class="o">=</span> <span class="n">matcher</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;&lt;LABEL&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">id_property</span><span class="o">&gt;=&lt;&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="k">if</span> <span class="n">node</span><span class="p">:</span>
    <span class="n">node</span><span class="p">[</span><span class="o">&lt;</span><span class="nb">property</span><span class="o">&gt;</span><span class="p">]</span> <span class="o">=</span> <span class="o">&lt;&gt;</span>
    <span class="n">graph</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</code></pre></div>

<h3 id="update-properties-multiple-properties">Update properties (multiple properties)<a class="headerlink" href="#update-properties-multiple-properties" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="n">node</span> <span class="o">=</span> <span class="n">matcher</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;&lt;LABEL&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">id_property</span><span class="o">&gt;=&lt;&gt;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="k">if</span> <span class="n">node</span><span class="p">:</span>
    <span class="n">node</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">properties</span><span class="p">)</span>
    <span class="n">graph</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</code></pre></div>

<h3 id="delete-nodes-from-list">Delete nodes from list<a class="headerlink" href="#delete-nodes-from-list" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="n">tx</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
<span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">bad_node_list</span><span class="p">:</span>
    <span class="n">node_matches</span> <span class="o">=</span> <span class="n">matcher</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;&lt;LABEL&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">id_property</span><span class="o">&gt;=</span><span class="n">node</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">node_matches</span><span class="p">:</span>
        <span class="n">graph</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
<span class="n">tx</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</code></pre></div>

<h3 id="query-graph">Query Graph<a class="headerlink" href="#query-graph" title="Permanent link">&para;</a></h3>
<p><a href="https://gist.github.com/DaniSancas/1d5265fc159a95ff457b940fc5046887">Cypher Query Cheatsheet</a></p>
<p>To get data from the graph</p>
<div class="codehilite"><pre><span></span><code><span class="n">results</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;&lt;CYPHER QUERY&gt;&quot;</span><span class="p">)</span>  <span class="c1"># returns cursor to stream results</span>
<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="c1"># do something</span>
</code></pre></div>

<p>Instead of streaming results, data can be read to a list of dictionaries </p>
<div class="codehilite"><pre><span></span><code><span class="n">results</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    MATCH(n:Node)-[]-()</span>
<span class="s2">    WHERE n.name = &quot;</span><span class="si">{</span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">    RETURN n.name, n.prop_1, n.prop_2</span>
<span class="s2">    &quot;&quot;&quot;</span>
<span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
<span class="c1"># returns:</span>
<span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;n.name&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;n.prop_1&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;n.prop_2&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;n.name&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;n.prop_1&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;n.prop_2&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">},</span>
    <span class="o">...</span>
<span class="p">]</span>
</code></pre></div>

<p>If your graph has spaces in the properties, use indexing:</p>
<div class="codehilite"><pre><span></span><code><span class="n">results</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    MATCH(n:Node)-[]-()</span>
<span class="s2">    WHERE n.name = &quot;</span><span class="si">{</span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">    RETURN n[&#39;my name&#39;], n[&#39;my prop_1&#39;], n[&#39;my prop_2&#39;]</span>
<span class="s2">    &quot;&quot;&quot;</span>
<span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
</code></pre></div>

<p>If labels have spaces, use backticks </p>
<div class="codehilite"><pre><span></span><code><span class="n">results</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    MATCH(n:`My Node`)-[]-()</span>
<span class="s2">    WHERE n.name = &quot;</span><span class="si">{</span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">    RETURN n[&#39;my name&#39;], n[&#39;my prop_1&#39;], n[&#39;my prop_2&#39;]</span>
<span class="s2">    &quot;&quot;&quot;</span>
<span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
</code></pre></div>

<p>If you need relationships from one central node to multiple other nodes, use OPTIONAL MATCH:</p>
<div class="codehilite"><pre><span></span><code><span class="n">results</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    MATCH(n:Node)-[]-(o:other_node)</span>
<span class="s2">    WHERE n.name=&quot;</span><span class="si">{</span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="s2">    OPTIONAL MATCH (o)-[]-(p)</span>
<span class="s2">    WHERE p:&lt;Label1&gt; OR p:&lt;Label2&gt;</span>
<span class="s2">    RETURN n.name, o.name, labels(p), p.name</span>
<span class="s2">    &quot;&quot;&quot;</span>
<span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
</code></pre></div>

<p>This query gives you nodes with labels Label1 or Label2 related to node with label node that is connected through other_node. Note that in the above example the identifying property for all additional nodes must be the same, namely <code>name</code>.</p>
<h3 id="working-with-pandas">Working with pandas<a class="headerlink" href="#working-with-pandas" title="Permanent link">&para;</a></h3>
<p>Py2neo integrates well with pandas.</p>
<h4 id="export-to-dataframe">Export to DataFrame<a class="headerlink" href="#export-to-dataframe" title="Permanent link">&para;</a></h4>
<p>Note that nodes may not conform well to pandas expectations, and unexpected errors can occur.</p>
<div class="codehilite"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;MATCH (a:Person) RETURN a.name, a.born&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_data_frame</span><span class="p">()</span>
</code></pre></div>

<h4 id="import-nodes-from-dataframe-columns">Import nodes from DataFrame columns<a class="headerlink" href="#import-nodes-from-dataframe-columns" title="Permanent link">&para;</a></h4>
<p>If lists of nodes of the same type are stored in DataFrame columns, you can create a unique list from each column and create a node using that list with the label as the column header. Labels may contain spaces.</p>
<div class="codehilite"><pre><span></span><code><span class="n">tx</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
<span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="n">node_set</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>  <span class="c1"># some data types not supported as labels</span>
    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">node_set</span><span class="p">:</span>
        <span class="n">new_node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">id_property</span><span class="o">&gt;=</span><span class="n">node</span><span class="p">,</span>
                       <span class="n">primary_key</span><span class="o">=</span><span class="s1">&#39;&lt;id_property&gt;&#39;</span><span class="p">,</span>
                       <span class="n">primary_label</span><span class="o">=</span><span class="n">column</span><span class="p">)</span>
        <span class="n">tx</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">new_node</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="s1">&#39;&lt;id_property&gt;&#39;</span><span class="p">)</span>
<span class="n">tx</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</code></pre></div>

<p>https://stackoverflow.com/questions/45738180/neo4j-create-nodes-and-relationships-from-pandas-dataframe-with-py2neo</p>
<h4 id="import-nodes-from-dataframe-rows">Import nodes from DataFrame rows<a class="headerlink" href="#import-nodes-from-dataframe-rows" title="Permanent link">&para;</a></h4>
<p>Alternatively, if the nodes correspond to rows and columns are properties (you should find this with tidy datasets), read the df with the primary label as the index column, convert to a dictionary, and iterate through the dictionary items to add nodes. Note that the index column must be unique.</p>
<div class="codehilite"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;path/to/data&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="s1">&#39;&lt;id_property&gt;&#39;</span><span class="p">)</span>
<span class="n">node_dict</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>

<span class="n">tx</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
<span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">properties</span> <span class="ow">in</span> <span class="n">node_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s1">&#39;&lt;LABEL&gt;&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">id_property</span><span class="o">&gt;=</span><span class="n">node</span><span class="p">,</span>
                <span class="n">primary_key</span><span class="o">=</span><span class="s1">&#39;&lt;id_property&gt;&#39;</span><span class="p">,</span>
                <span class="n">primary_label</span><span class="o">=</span><span class="s1">&#39;&lt;LABEL&gt;&#39;</span><span class="p">,</span>
                <span class="o">**</span><span class="n">properties</span><span class="p">)</span>
     <span class="n">tx</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="s1">&#39;&lt;LABEL&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;id_property&gt;&#39;</span><span class="p">)</span>
<span class="n">tx</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="c1"># needs to be tested</span>
</code></pre></div>

<p>Using <code>**properties</code> passes the dictionary of properties, where each column is a key and the data in the cell is a value, to the Node object.</p>
<h4 id="add-relationships-from-dataframe-columns">Add relationships from DataFrame columns<a class="headerlink" href="#add-relationships-from-dataframe-columns" title="Permanent link">&para;</a></h4>
<p>Where nodes are stored in columns, and nodes have already been imported, you can use either <code>df.iterrows()</code> or convert the DataFrame to a dictionary to relate all nodes in a single row. </p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">py2neo</span> <span class="kn">import</span> <span class="n">NodeMatcher</span>
<span class="n">matcher</span> <span class="o">=</span> <span class="n">NodeMatcher</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;path/to/data&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="s1">&#39;&lt;id_property&gt;&#39;</span><span class="p">)</span>
<span class="n">entity_dict</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

<span class="n">tx</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">node_label</span><span class="p">,</span> <span class="n">node_dict</span> <span class="ow">in</span> <span class="n">entity_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">project_id</span> <span class="ow">in</span> <span class="n">entity_dict</span><span class="p">[</span><span class="n">node_label</span><span class="p">]:</span>
            <span class="n">project_node</span> <span class="o">=</span> <span class="n">matcher</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;Project&#39;</span><span class="p">,</span> 
                                         <span class="n">project_number</span><span class="o">=</span><span class="n">project_id</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="n">entity_node</span> <span class="o">=</span> <span class="n">matcher</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
                <span class="n">node_label</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">node_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">project_id</span><span class="p">))</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">project_node</span> <span class="ow">and</span> <span class="n">entity_node</span><span class="p">:</span>
                <span class="n">relationship</span> <span class="o">=</span> <span class="n">Relationship</span><span class="p">(</span><span class="n">project_node</span><span class="p">,</span> <span class="s2">&quot;IN&quot;</span><span class="p">,</span> <span class="n">entity_node</span><span class="p">)</span>
                <span class="n">tx</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">relationship</span><span class="p">)</span>

    <span class="n">tx</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</code></pre></div>

<p>How this works:</p>
<p>The <code>entity_dict</code> looks like:</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
    <span class="s1">&#39;Country&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;AID-512-A-00-08-00005&#39;</span><span class="p">:</span> <span class="s1">&#39;Brazil&#39;</span><span class="p">,</span> 
                <span class="s1">&#39;AID-512-A-00-08-00015&#39;</span><span class="p">:</span> <span class="s1">&#39;Brazil&#39;</span><span class="p">,</span> 
                <span class="s1">&#39;AID-512-A-10-00004&#39;</span><span class="p">:</span> <span class="s1">&#39;Brazil&#39;</span><span class="p">,</span> 
                <span class="s1">&#39;AID-512-A-11-00004&#39;</span><span class="p">:</span> <span class="s1">&#39;Brazil&#39;</span><span class="p">,</span> 
                <span class="s1">&#39;AID-512-A-16-00001&#39;</span><span class="p">:</span> <span class="s1">&#39;Brazil&#39;</span><span class="p">},</span> 
    <span class="s1">&#39;Income Group&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;AID-512-A-00-08-00005&#39;</span><span class="p">:</span> <span class="s1">&#39;Upper Middle Income Country&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;AID-512-A-00-08-00015&#39;</span><span class="p">:</span> <span class="s1">&#39;Upper Middle Income Country&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;AID-512-A-10-00004&#39;</span><span class="p">:</span> <span class="s1">&#39;Upper Middle Income Country&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;AID-512-A-11-00004&#39;</span><span class="p">:</span> <span class="s1">&#39;Upper Middle Income Country&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;AID-512-A-16-00001&#39;</span><span class="p">:</span> <span class="s1">&#39;Upper Middle Income Country&#39;</span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>Each column has the relationship required between the index (in this case a project number) and the node of the type contained in that column. You can create all of the relationships required and then repeat the process by specifying a new index column, if needed.</p>
<p>For each column (node_label), we use the dictionary associated to match each project id and each node. If a match is found for both, we create a relationship. Don't forget to commit the transaction.</p>
<p>You can use another dictionary to specify the label for the relationship if you want to have different relationship labels for different columns. Simply lookup the relationship name in place of "IN".</p>
<h4 id="using-objects">Using objects<a class="headerlink" href="#using-objects" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">py2neo.ogm</span> <span class="kn">import</span> <span class="n">GraphObject</span><span class="p">,</span> <span class="n">Property</span>
<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">GraphObject</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Property</span><span class="p">()</span>
    <span class="n">born</span> <span class="o">=</span> <span class="n">Property</span><span class="p">()</span>

<span class="p">[(</span><span class="n">a</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">born</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">Person</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>

<span class="c1"># returns</span>
<span class="p">[(</span><span class="s1">&#39;Laurence Fishburne&#39;</span><span class="p">,</span> <span class="mi">1961</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;Hugo Weaving&#39;</span><span class="p">,</span> <span class="mi">1960</span><span class="p">),</span>
 <span class="p">(</span><span class="s1">&#39;Lilly Wachowski&#39;</span><span class="p">,</span> <span class="mi">1967</span><span class="p">)]</span>
</code></pre></div>

<h4 id="_1"><a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../dash/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Dash
            </div>
          </div>
        </a>
      
      
        <a href="../../additional-resources/scoping/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Scoping Canvas
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 Environmental Incentives
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.5cf3e710.min.js"></script>
      
        <script src="../../js/scripts.js"></script>
      
    
  </body>
</html>